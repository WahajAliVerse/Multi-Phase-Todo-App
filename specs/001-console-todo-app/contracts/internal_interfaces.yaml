# Internal Interface Contracts: Console Todo Application

## Task Model Interface

### Task Class Definition
```python
from dataclasses import dataclass
from enum import Enum

class TaskStatus(Enum):
    PENDING = "pending"
    COMPLETED = "completed"

@dataclass
class Task:
    id: int
    title: str
    description: str = ""
    completed: bool = False

    def mark_complete(self) -> None:
        """Mark the task as complete"""
        pass

    def mark_incomplete(self) -> None:
        """Mark the task as incomplete"""
        pass

    def update_details(self, title: str = None, description: str = None) -> None:
        """Update task details"""
        pass

    def to_dict(self) -> dict:
        """Convert task to dictionary representation"""
        pass
```

## Storage Interface

### InMemoryStorage Class Definition
```python
from typing import List, Optional
from models.task import Task

class InMemoryStorage:
    def __init__(self):
        """Initialize in-memory storage"""
        pass

    def add_task(self, title: str, description: str = "") -> Task:
        """Add a new task to storage and return the created task"""
        pass

    def get_task(self, task_id: int) -> Optional[Task]:
        """Retrieve a task by its ID"""
        pass

    def get_all_tasks(self) -> List[Task]:
        """Retrieve all tasks"""
        pass

    def update_task(self, task_id: int, title: str = None, description: str = None) -> bool:
        """Update task details by ID, return True if successful"""
        pass

    def delete_task(self, task_id: int) -> bool:
        """Delete a task by ID, return True if successful"""
        pass

    def mark_task_complete(self, task_id: int) -> bool:
        """Mark a task as complete by ID, return True if successful"""
        pass

    def mark_task_incomplete(self, task_id: int) -> bool:
        """Mark a task as incomplete by ID, return True if successful"""
        pass
```

## CLI Interface

### ConsoleUI Class Definition
```python
from storage.in_memory_storage import InMemoryStorage

class ConsoleUI:
    def __init__(self, storage: InMemoryStorage):
        """Initialize console UI with storage"""
        pass

    def display_menu(self) -> None:
        """Display the main menu options"""
        pass

    def handle_add_task(self) -> None:
        """Handle adding a new task"""
        pass

    def handle_view_tasks(self) -> None:
        """Handle viewing all tasks"""
        pass

    def handle_update_task(self) -> None:
        """Handle updating a task"""
        pass

    def handle_delete_task(self) -> None:
        """Handle deleting a task"""
        pass

    def handle_mark_complete(self) -> None:
        """Handle marking a task as complete"""
        pass

    def handle_mark_incomplete(self) -> None:
        """Handle marking a task as incomplete"""
        pass

    def run(self) -> None:
        """Run the main application loop"""
        pass
```

## Error Handling Contract

### Custom Exceptions
```python
class TaskNotFoundError(Exception):
    """Raised when a task with the given ID is not found"""
    pass

class InvalidTaskError(Exception):
    """Raised when task validation fails"""
    pass

class StorageError(Exception):
    """Raised when storage operations fail"""
    pass
```

## Validation Contract

### Input Validation Functions
```python
def validate_task_title(title: str) -> bool:
    """Validate task title (1-255 characters, non-empty)"""
    pass

def validate_task_description(description: str) -> bool:
    """Validate task description (max 1000 characters)"""
    pass

def validate_task_id(task_id: int) -> bool:
    """Validate task ID (positive integer)"""
    pass
```