# API Contract: Task Management

## Base URL
`/api/v1/tasks`

## Endpoints

### GET /api/v1/tasks
**Description**: Retrieve all tasks for the authenticated user
**Authentication**: Required (JWT Token)
**Parameters**:
- `status` (optional): Filter by status ('active', 'completed')
- `priority` (optional): Filter by priority ('high', 'medium', 'low')
- `search` (optional): Search by title or description
- `sort` (optional): Sort by ('due_date', 'priority', 'title', 'created_at')
- `order` (optional): Sort order ('asc', 'desc')
- `page` (optional): Page number for pagination
- `limit` (optional): Items per page for pagination

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "tasks": [
    {
      "id": "uuid-string",
      "title": "Task title",
      "description": "Task description (optional)",
      "status": "active|completed",
      "priority": "high|medium|low",
      "due_date": "2023-12-31T10:00:00Z (optional)",
      "created_at": "2023-12-31T10:00:00Z",
      "updated_at": "2023-12-31T10:00:00Z",
      "completed_at": "2023-12-31T10:00:00Z (optional)",
      "recurrence_pattern_id": "uuid-string (optional)",
      "tags": [
        {
          "id": "uuid-string",
          "name": "tag name",
          "color": "#FF0000"
        }
      ]
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 100,
    "pages": 10
  }
}
```

### POST /api/v1/tasks
**Description**: Create a new task
**Authentication**: Required (JWT Token)
**Request Body**:
```
{
  "title": "Task title (required)",
  "description": "Task description (optional)",
  "priority": "high|medium|low (default: medium)",
  "due_date": "2023-12-31T10:00:00Z (optional)",
  "tags": ["tag1", "tag2"] (optional),
  "recurrence_pattern": {
    "pattern_type": "daily|weekly|monthly|yearly",
    "interval": 1 (integer),
    "end_condition": "never|after_occurrences|on_date",
    "occurrence_count": 5 (optional, for 'after_occurrences'),
    "end_date": "2023-12-31" (optional, for 'on_date')
  }
}
```

**Response**:
```
Status: 201 Created
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "title": "Task title",
  "description": "Task description (optional)",
  "status": "active",
  "priority": "high|medium|low",
  "due_date": "2023-12-31T10:00:00Z (optional)",
  "created_at": "2023-12-31T10:00:00Z",
  "updated_at": "2023-12-31T10:00:00Z",
  "completed_at": null,
  "recurrence_pattern_id": "uuid-string (optional)",
  "tags": [
    {
      "id": "uuid-string",
      "name": "tag name",
      "color": "#FF0000"
    }
  ]
}
```

### GET /api/v1/tasks/{id}
**Description**: Retrieve a specific task by ID
**Authentication**: Required (JWT Token)
**Parameters**:
- `id`: Task ID (path parameter)

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "title": "Task title",
  "description": "Task description (optional)",
  "status": "active|completed",
  "priority": "high|medium|low",
  "due_date": "2023-12-31T10:00:00Z (optional)",
  "created_at": "2023-12-31T10:00:00Z",
  "updated_at": "2023-12-31T10:00:00Z",
  "completed_at": "2023-12-31T10:00:00Z (optional)",
  "recurrence_pattern_id": "uuid-string (optional)",
  "tags": [
    {
      "id": "uuid-string",
      "name": "tag name",
      "color": "#FF0000"
    }
  ]
}
```

### PUT /api/v1/tasks/{id}
**Description**: Update a specific task by ID
**Authentication**: Required (JWT Token)
**Parameters**:
- `id`: Task ID (path parameter)
**Request Body**:
```
{
  "title": "Task title (optional)",
  "description": "Task description (optional)",
  "status": "active|completed (optional)",
  "priority": "high|medium|low (optional)",
  "due_date": "2023-12-31T10:00:00Z (optional)",
  "tags": ["tag1", "tag2"] (optional),
  "recurrence_pattern": {
    "pattern_type": "daily|weekly|monthly|yearly",
    "interval": 1 (integer),
    "end_condition": "never|after_occurrences|on_date",
    "occurrence_count": 5 (optional, for 'after_occurrences'),
    "end_date": "2023-12-31" (optional, for 'on_date')
  }
}
```

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "title": "Updated task title",
  "description": "Updated task description (optional)",
  "status": "active|completed",
  "priority": "high|medium|low",
  "due_date": "2023-12-31T10:00:00Z (optional)",
  "created_at": "2023-12-31T10:00:00Z",
  "updated_at": "2023-12-31T10:00:00Z",
  "completed_at": "2023-12-31T10:00:00Z (optional)",
  "recurrence_pattern_id": "uuid-string (optional)",
  "tags": [
    {
      "id": "uuid-string",
      "name": "tag name",
      "color": "#FF0000"
    }
  ]
}
```

### DELETE /api/v1/tasks/{id}
**Description**: Delete a specific task by ID
**Authentication**: Required (JWT Token)
**Parameters**:
- `id`: Task ID (path parameter)

**Response**:
```
Status: 204 No Content
```

### PUT /api/v1/tasks/{id}/toggle-complete
**Description**: Toggle the completion status of a task
**Authentication**: Required (JWT Token)
**Parameters**:
- `id`: Task ID (path parameter)

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "status": "active|completed",
  "completed_at": "2023-12-31T10:00:00Z (optional)"
}
```