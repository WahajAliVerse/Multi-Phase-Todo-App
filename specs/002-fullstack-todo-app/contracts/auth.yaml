# API Contract: Authentication

## Base URL
`/api/v1/auth`

## Endpoints

### POST /api/v1/auth/register
**Description**: Register a new user
**Authentication**: None
**Request Body**:
```
{
  "username": "Username (3-50 chars, alphanumeric and underscore only)",
  "email": "Valid email address",
  "password": "Password (at least 8 chars with complexity)"
}
```

**Response**:
```
Status: 201 Created
Content-Type: application/json
Body:
{
  "user": {
    "id": "uuid-string",
    "username": "Username",
    "email": "Email address",
    "created_at": "2023-12-31T10:00:00Z"
  },
  "access_token": "JWT access token",
  "refresh_token": "JWT refresh token"
}
```

### POST /api/v1/auth/login
**Description**: Authenticate a user
**Authentication**: None
**Request Body**:
```
{
  "email": "Valid email address",
  "password": "Password"
}
```

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "user": {
    "id": "uuid-string",
    "username": "Username",
    "email": "Email address",
    "created_at": "2023-12-31T10:00:00Z"
  },
  "access_token": "JWT access token",
  "refresh_token": "JWT refresh token"
}
```

### POST /api/v1/auth/logout
**Description**: Logout the current user
**Authentication**: Required (JWT Token)
**Request Body**: None

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "message": "Successfully logged out"
}
```

### POST /api/v1/auth/refresh
**Description**: Refresh the access token using the refresh token
**Authentication**: Required (Refresh Token in header)
**Request Body**: None

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "access_token": "New JWT access token"
}
```

### GET /api/v1/auth/me
**Description**: Get the current user's profile
**Authentication**: Required (JWT Token)
**Request Body**: None

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "username": "Username",
  "email": "Email address",
  "created_at": "2023-12-31T10:00:00Z",
  "updated_at": "2023-12-31T10:00:00Z",
  "preferences": {
    "theme": "light|dark",
    "notifications_enabled": true
  }
}
```

### PUT /api/v1/auth/me
**Description**: Update the current user's profile
**Authentication**: Required (JWT Token)
**Request Body**:
```
{
  "username": "New username (optional)",
  "email": "New email (optional)",
  "preferences": {
    "theme": "light|dark (optional)",
    "notifications_enabled": true|false (optional)
  }
}
```

**Response**:
```
Status: 200 OK
Content-Type: application/json
Body:
{
  "id": "uuid-string",
  "username": "Updated username",
  "email": "Updated email",
  "created_at": "2023-12-31T10:00:00Z",
  "updated_at": "2023-12-31T10:00:00Z",
  "preferences": {
    "theme": "light|dark",
    "notifications_enabled": true|false
  }
}
```